appId: ${env.APP_ID}
productName: ${env.PRODUCT_NAME}
asar: false

# Include Electron build + Next standalone app; exclude electron from Next tree
files:
  - from: 'apps/desktop/dist'
    to: 'apps/desktop/dist'
  - from: 'apps/app/.next/standalone/apps/app'
    to: 'apps/app'
  - from: 'apps/app/.next/standalone/node_modules'
    to: 'apps/app/node_modules'
  - from: 'apps/app/.next/static'
    to: 'apps/app/.next/static'
  - from: 'apps/app/public'
    to: 'apps/app/public'
  - '!apps/app/node_modules/electron/**'

extraResources:
  - from: packages/database/seed/app.sqlite
    to: app.sqlite

afterSign: 'scripts/afterSign.mjs'

mac:
  category: public.app-category.productivity
  hardenedRuntime: true
  gatekeeperAssess: false
  target: [dmg]
  artifactName: '${env.PRODUCT_NAME}-${version}-${arch}.dmg'

win:
  target: [nsis]
  artifactName: '${env.PRODUCT_NAME}-${version}-x64.exe'

linux:
  target: [AppImage, deb]
  category: Utility
  artifactName: '${env.PRODUCT_NAME}-${version}-${arch}.${ext}'
