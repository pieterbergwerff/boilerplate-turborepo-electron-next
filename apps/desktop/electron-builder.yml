appId: com.pieterbergwerff.turborepo-electron-nextjs
productName: TurborepoElectronNext
asar: false
electronVersion: 39.2.0
npmRebuild: true

# Include Electron build + Next standalone app
files:
  - dist/**/*
  - nextjs-standalone/**/*
  - '!nextjs-standalone/node_modules/electron'
  - '!nextjs-standalone/node_modules/electron/**'

extraResources:
  - from: ../../packages/database/seed/app.sqlite
    to: app.sqlite

# afterSign hook requires signing - skip in CI
# afterSign: '../../packages/scripts/afterSign.mjs'

mac:
  category: public.app-category.productivity
  hardenedRuntime: false
  gatekeeperAssess: false
  # Skip signing when no certificate is available (e.g., in CI)
  identity: null
  # Use 'dir' instead of 'dmg' to avoid code signing symlink issues in CI
  target: [dir]
  artifactName: '${productName}-${version}-${arch}.${ext}'

win:
  target: [nsis]
  artifactName: '${productName}-${version}-x64.exe'

linux:
  # Only AppImage - skip deb which has fpm/7zip tilde path expansion bug in CI
  target: [AppImage]
  category: Utility
  artifactName: '${productName}-${version}-${arch}.${ext}'
